# 機能設計仕様書

## 1. コア機能

### 1.1 フラッシュカード表示機能

#### 基本機能

- カードの表示・裏返し
  - タップによる表裏切り替え
  - アニメーション効果付きの切り替え表現
- カードのナビゲーション
  - スワイプによるカード切り替え
  - 左右矢印ボタンによる切り替え
  - 現在の位置/総数の表示

#### 表示コンテンツ

- 表面：問題文
- 裏面：解答と解説
- メタ情報（任意表示）
  - カテゴリー情報
  - 正答率
  - 学習回数

### 1.2 回答チェック機能

#### 自己採点機能

- 「正解」「不正解」ボタンによる採点
- 採点結果の即時記録
- 採点履歴の管理

#### データ記録

- AsyncStorage への保存
  - 回答状況
  - 採点日時
  - 採点回数

### 1.3 進捗管理機能

#### 進捗計算

- カテゴリー別正答率
  ```typescript
  正答率 = (正解数 ÷ 回答数) × 100
  ```
- 学習進捗率
  ```typescript
  進捗率 = (学習済カード数 ÷ 総カード数) × 100
  ```

#### 表示項目

- 全体の進捗状況
- カテゴリー別の進捗状況
- 個別カードの学習履歴

### 1.4 目次機能

#### 階層構造

1. 資格一覧（トップレベル）
   - 資格セット名
   - 全体の進捗率
2. カテゴリー一覧（第 2 階層）
   - カテゴリー名
   - カテゴリー別進捗率
3. カード一覧（第 3 階層）
   - カード情報
   - 個別の学習状況

#### 表示オプション

- リスト表示
- グリッド表示（将来対応）
- 検索・フィルター機能（将来対応）

## 2. ユーティリティ機能

### 2.1 テーマ設定

#### ダークモード対応

- システム設定連動
- 手動切り替え
- カラーパレット
  ```typescript
  interface ThemeColors {
    primary: string;
    background: string;
    surface: string;
    text: string;
    accent: string;
  }
  ```

### 2.2 データ管理

#### ローカルストレージ

- データの自動保存
- 起動時の自動読み込み
- エラー時のリカバリー処理

## 3. エラーハンドリング

### 3.1 データ関連

- ストレージアクセスエラー
  - 再試行機能
  - エラーメッセージ表示
- データ整合性エラー
  - バリデーションチェック
  - 自動修復機能（可能な場合）

### 3.2 UI 関連

- 画面遷移エラー
  - エラー画面表示
  - ホーム画面への復帰機能
- レンダリングエラー
  - フォールバック UI
  - エラーバウンダリの実装

## 4. パフォーマンス最適化

### 4.1 表示最適化

- メモ化（React.memo）の適用
- 仮想化リストの使用
- 画像の遅延読み込み

### 4.2 データ最適化

- キャッシュ戦略
- バッチ処理の実装
- 必要なデータのみの読み込み

## 5. 将来的な拡張機能

- 自動採点機能
  - 選択式問題対応
  - テキスト入力採点
- オンライン同期
  - クラウドバックアップ
  - マルチデバイス対応
- 学習分析
  - 統計データの視覚化
  - 学習傾向の分析
